module Test

import fr.cea.nabla.generator.*

var u = OutVar { nabla = "u" output = "Vitesse"}
var inputDir = "src/test"  
var javaOutputDir = "../../NablaTestJava/src"  

Workflow
{
	component = Nabla2IrWorkflowComponent : nabla2Ir
	{ 
		id = "nabla2Ir"
		nablaModelPath = "${inputDir}/test.nabla"
	}

	component = TagPersistentVariablesWorkflowComponent : tagPersistentVariables
	{
		id = "tagPersistentVariables"
		previous = nabla2Ir
		outVar = u
	}
	
	component = ReplaceUtf8CharsWorkflowComponent : replaceUtf8Chars
	{
		id = "replaceUtf8Chars"
		previous = tagPersistentVariables
	}	
	
	component = ReplaceInternalReductionsWorkflowComponent : replaceInternalReductions
	{
		id = "replaceInternalReductions"
		previous = replaceUtf8Chars
	}	
	
	component = OptimizeConnectivitiesWorkflowComponent : optimizeConnectivities
	{
		id = "optimizeConnectivities"
		previous = replaceInternalReductions
		connectivity = "cells"
		connectivity = "nodes"
		connectivity = "faces"
	}	
	
	component = FillJobHLTsWorkflowComponent : fillJobHLTs
	{
		id = "fillJobHLTs"
		previous = optimizeConnectivities
		writeModel = true
	}
	
	component = Ir2JavaWorkflowComponent 
	{
		previous = fillJobHLTs
		outputFilePath = javaOutputDir
	}		
}